### PRD 0010A: Layout Flip & Pinned Input

**Goal**: Establish the conversational chat layout foundation by flipping to vertical scroll with bubbles, pinning the input at bottom, and scaffolding the gear menu—replacing static cards for a Grok/Libre feel.

**Scope**: Update view to chat structure; move form to pinned footer; add empty gear menu dropdown.

**Out of Scope**: Dynamic updates/polling (0010B); controls/Heartbeat in gear (0010C); audit sidebar (0010D).

**Requirements**:
1) **Vertical Chat Stream**: Replace cards with &lt;div class="chat flex flex-col-reverse h-[80vh] overflow-y-auto"&gt; for scroll-up bubbles (placeholder user/agent divs with daisyui-chat-bubble).
2) **Pinned Input**: Move form to &lt;footer class="fixed bottom-0 w-full bg-base-100 p-4"&gt; with textarea/send button (daisyui-input-group).
3) **Gear Menu Scaffold**: Add top-right daisyui-btn (gear icon) opening empty dropdown (daisyui-dropdown-content with placeholder "Controls coming soon").
4) **Rails Guidance**: Use Turbo Frame for future streams; Stimulus controller for scroll-to-bottom (data-controller="chat" data-action="turbo:frame-load->chat#scroll").
5) **Mobile Keyboard-Safe Padding**: Detect keyboard/resize events and add ~88px dynamic bottom padding so the pinned footer and latest bubble remain visible on mobile.
6) **Auth Gating UX**: For admin/owner checks, return 403 JSON on Turbo requests; for full-page loads redirect with flash message for non-admins.
7) **Accessibility Roles**: Add aria roles/labels (e.g., role="log", aria-live="polite" on stream/banners) to ensure non-color cues for bubbles and status messages.

**Architectural Context**: Builds on existing scaffold; vision.md: English-first, responsive; no JS frameworks—Stimulus only.

**Acceptance Criteria**:
- Page loads with vertical stream (bubbles scroll up).
- Input pinned at bottom, form functional (submit starts run per 0041B).
- Gear icon opens empty menu.
- Responsive: Mobile input visible; desktop full-height; keyboard-safe padding keeps latest bubble/input unobscured.
- Auth gating behaves per request type (Turbo JSON vs. redirect/flash).

**Manual Test Plan**:
1) Visit /admin/sap-collaborate as admin.
2) Scroll page → input stays pinned at bottom.
3) Resize to mobile and focus textarea → keyboard-safe padding keeps footer/latest bubble visible.
4) Click gear → dropdown opens (empty).
5) Enter task → submit → form works (as per 0041B).
6) Hit page as non-admin via Turbo request → receive 403 JSON; via full page → redirected with flash.

**Deliverables**: Updated view (chat.html.erb partials for bubbles); Stimulus chat_controller.js; basic CSS tweaks for height/pinning; BubbleComponent for standardized bubble types/styling (user/system/agent/error/token/phase; referenced by 0010B).